---
// V3Features.astro - Feature cards + footer section
import V3Nav from './V3Nav.astro';
import V3Card from './V3Card.astro';

const features = [
  {
    title: 'Research Hub',
    description: 'Deep dives into AI Security, Jailbreaking techniques, and Prompt Injection analysis.',
    cta: 'Access Database',
    href: '/ai-security/',
    isPrimary: true,
  },
  {
    title: 'Frameworks',
    description: 'AATHF & SEF Methodologies.',
    cta: 'View Docs',
    href: '/frameworks/',
    isPrimary: false,
  },
  {
    title: 'Tools',
    description: 'Offensive security arsenal.',
    cta: 'Download',
    href: '/tools/',
    isPrimary: false,
  },
  {
    title: 'Latest Writing',
    description: 'Publications and external thoughts.',
    cta: 'Read Articles',
    href: '/blog/',
    isPrimary: false,
  },
];

const footerLinks = {
  Research: [
    { label: 'AI Security', href: '/ai-security/' },
    { label: 'CVEs', href: '/cve/' },
    { label: 'Frameworks', href: '/frameworks/' },
    { label: 'Writing', href: '/blog/' },
  ],
  Frameworks: [
    { label: 'AATHF', href: '/frameworks/aathf/' },
    { label: 'P.R.O.M.P.T.', href: '/frameworks/prompt/' },
    { label: 'SEF', href: '/frameworks/sef/' },
  ],
  Publications: [
    { label: 'Medium', href: 'https://medium.com/@snailsploit', external: true },
    { label: 'Jailbreak Chef', href: 'https://jailbreakchef.com', external: true },
    { label: 'Hak119', href: '#', external: true },
    { label: 'Pentest Mag', href: '#', external: true },
  ],
  Profiles: [
    { label: 'Github', href: 'https://github.com/snailsploit', external: true },
    { label: 'Wordfence', href: '#', external: true },
    { label: 'LinkedIn', href: 'https://linkedin.com/in/kaiaizen', external: true },
  ],
  Site: [
    { label: 'About', href: '/about/' },
    { label: 'Book', href: '/adversarial-minds/' },
    { label: 'Contact', href: '/contact/' },
  ],
};
---

<section class="mx-4 md:mx-8 mt-8 mb-8">
  <div class="bg-zinc-900/60 border border-white/[0.08] rounded-3xl overflow-hidden">
    
    <!-- Inner Navigation -->
    <div class="px-6 md:px-10 pt-6 md:pt-8">
      <V3Nav variant="section" />
    </div>

    <!-- Feature Cards Grid -->
    <div class="px-6 md:px-10 pb-10">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5">
        {features.map((feature) => (
          <V3Card {...feature} />
        ))}
      </div>
    </div>

    <!-- Footer Links -->
    <div class="px-6 md:px-10 py-8 border-t border-white/[0.08]">
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-8">
        {Object.entries(footerLinks).map(([category, links]) => (
          <div>
            <h4 class="text-white text-sm font-semibold mb-4">{category}</h4>
            <ul class="space-y-2.5">
              {links.map((link) => (
                <li>
                  <a
                    href={link.href}
                    class="text-gray-500 hover:text-gray-300 text-[13px] transition-colors"
                    {...(link.external ? { target: '_blank', rel: 'noopener noreferrer' } : {})}
                  >
                    {link.label}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>

    <!-- Copyright Bar with CSS Rust Texture -->
    <div class="v3-rust-bar relative px-6 md:px-10 py-6 overflow-hidden">
      <!-- CSS-only rust effect -->
      <div class="absolute inset-0 v3-rust-texture"></div>

      <!-- Content -->
      <div class="relative z-10 flex justify-between items-center">
        <span class="text-gray-500 text-[13px]">
          Â© 2026 Kai Aizen (SnailSploit). All rights reserved.
        </span>

        <!-- Chat Button -->
        <button 
          class="w-11 h-11 bg-[#c73e3e] hover:bg-[#d94444] rounded-xl flex items-center justify-center transition-colors"
          aria-label="Open chat"
        >
          <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
</section>

<style>
  /* CSS-only rust/grunge texture effect */
  .v3-rust-texture {
    background: 
      /* Rust color gradients */
      linear-gradient(to top, rgba(139, 69, 19, 0.35) 0%, rgba(120, 50, 20, 0.2) 40%, transparent 100%),
      /* Noise-like pattern using gradients */
      radial-gradient(ellipse at 10% 90%, rgba(160, 82, 45, 0.4) 0%, transparent 30%),
      radial-gradient(ellipse at 30% 85%, rgba(139, 69, 19, 0.3) 0%, transparent 25%),
      radial-gradient(ellipse at 50% 95%, rgba(178, 102, 51, 0.35) 0%, transparent 35%),
      radial-gradient(ellipse at 70% 88%, rgba(120, 60, 30, 0.3) 0%, transparent 28%),
      radial-gradient(ellipse at 90% 92%, rgba(150, 75, 35, 0.4) 0%, transparent 32%),
      /* Darker patches */
      radial-gradient(ellipse at 20% 95%, rgba(80, 40, 20, 0.3) 0%, transparent 20%),
      radial-gradient(ellipse at 60% 90%, rgba(70, 35, 15, 0.25) 0%, transparent 22%),
      radial-gradient(ellipse at 85% 95%, rgba(90, 45, 22, 0.3) 0%, transparent 18%);
  }

  /* Add subtle grain texture */
  .v3-rust-bar::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.08;
    mix-blend-mode: overlay;
    pointer-events: none;
  }
</style>
